md-content(class='md-whiteframe-z1 md-padding')
  section(layout-wrap, layout='row')
    md-button(class='md-raised md-accent md-hue-9',
              ng-bind='Meetings.show ? "Скрыть Карту" : "Показать Карту"',
              ng-click='Meetings.toggle_map()', flex,
              style='margin:-15px -20px 0px -20px;z-index:1;',
              aria-label='show/hide map')
  section(ng-show='Meetings.show')
    div(id='map', layout-wrap, style='min-height:300px;', flex)
  section(layout='row', layout-align='end', style='')
    md-button(class='md-raised md-accent md-hue-9',
              style='z-index:2;margin-bottom:-120px;margin-top:15px;border-radius:0px;height:20px;',
              ng-click='Meetings.fetch_nearby_meetings()')
      | Рядом
    md-button(class='md-raised md-accent md-hue-9',
              style='z-index:2;margin-bottom:-120px;margin-top:15px;border-radius:0px;height:20px;',
              ng-click='$state.go("new_meeting")')
      | Cоздать Встречу
  section
    md-list(layout='column')
      md-subheader(class='md-no-sticky') Встречи : 
      md-list-item.md-whiteframe-z1(ng-repeat='meeting in Meetings.meetings | orderBy : "+date"',
                   layout='row', layout-sm='column',
                   layout-gt-sm-wrap, layout-fill,
                   layout-align='center center', layout-sm-align='center',
                   style='background-color: #F5F5F5;padding:0px 0px;margin:15px 0px;')
        //- img(ng-src='{{Meetings.owners[meeting.owner].picture}}', class='md-card-image',
        //-     flex-gt-sm='50', flex='100')
        md-card(flex-gt-sm='45', flex='100')
          img(ng-src='{{Meetings.owners[meeting.owner].picture}}', class='md-card-image')
          section(class='md-actions')
            md-input-container(style='margin-bottom:0px;background-color: #F5F5F5;')
              md-button(style='margin-bottom:-10px;', class='md-raised md-accent md-hue-5 md-margin', ng-click='Meetings.add_friend(meeting.owner)') Добавить В Друзья
            md-input-container(style='margin-top:-15px;background-color: #F5F5F5;')
              md-button(style='margin-bottom:-15px;', class='md-raised md-accent md-hue-5 md-margin', ng-click="$state.go('chat', {id:meeting.owner})") Написать Сообщение
        md-content(style='background-color: #F5F5F5;padding-left:10px;',
                   flex-gt-sm='50', flex='100',
                   layout='column', layout-align='space-between start')
          section(layout='row', layout-align='end end',layout-wrap, layout-fill)
            img(ng-src='{{"images/category_icons/" + key + ".png"}}', ng-repeat='(key, val) in meeting.categories',
                style='height:25px;width:25px;margin:5px 5px 5px 0px;', class='md-margin')
          section(style='margin-top:-20px;margin-bottom:10px;', class="md-list-item-text")
            h3(ng-bind='Meetings.owners[meeting.owner].displayName')
            h4(ng-if='meeting.eventname', flex) {{"Событие: " + meeting.eventname}}
            h4(flex) {{ 'Время встречи: ' + meeting.time + ' ' + (meeting.date | date: 'MM/dd/yyyy')}}
            p(ng-if='meeting.location', ng-bind='"Место Встречи: " + Meetings.addresses[meeting.location]',flex) 
            md-subheader(ng-bind='meeting.description', flex, style='background-color:#F5F5F5;')
          section(layout='column', layout-wrap, layout-fill, flex, layout-align='center center', style='padding-top:30px;')
            md-button(style='border-radius:0px;width:250px;', class='md-raised md-accent md-hue-5 md-margin', flex) Встречи {{Meetings.owners[meeting.owner].displayName}}
            md-button(style='border-radius:0px;width:250px;', class='md-raised md-accent md-hue-5 md-margin', flex) Пригласить Друга
            md-button(style='border-radius:0px;width:250px;', class='md-raised md-accent md-hue-5 md-margin', flex, ng-click='Meetings.show_onmap(meeting.location, Meetings.addresses[meeting.location])') На карте
